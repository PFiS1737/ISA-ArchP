---
source: tests/snaptest.rs
input_file: examples/minesweeper.asm
---
success: true
exit_code: 0
----- stdout -----
0x90060A00 # jmp 0x1D0           [jmp main]
0x84020000 # li r1 0             [clr x]                                  <label: init_screen>
0x84040000 # li r2 0             [clr y]
0xD0181A1B # col 0x181A1B        [col COLOR_BACK]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_back>
0x40021001 # addi r1 r1 1        [inc x]
0x843E0080 # li tmp 128          [blt x SCREEN_WIDTH draw_back]
0x9600109F # blt r1 tmp 4        [blt x SCREEN_WIDTH draw_back]
0x40042001 # addi r2 r2 1        [inc y]
0x84020000 # li r1 0             [clr x]
0x843E0048 # li tmp 72           [blt y SCREEN_HEIGHT draw_back]
0x9600209F # blt r2 tmp 4        [blt y SCREEN_HEIGHT draw_back]
0x84020000 # li r1 0             [clr x]
0x84040000 # li r2 0             [clr y]
0xD04C545C # col 0x4C545C        [col COLOR_HIDDEN]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_grid>
0x40021001 # addi r1 r1 1        [inc x]
0x843E0079 # li tmp 121          [blt x GRID_WIDTH draw_grid]
0x960011FF # blt r1 tmp 15       [blt x GRID_WIDTH draw_grid]
0x40042001 # addi r2 r2 1        [inc y]
0x84020000 # li r1 0             [clr x]
0x843E0041 # li tmp 65           [blt y GRID_HEIGHT draw_grid]
0x960021FF # blt r2 tmp 15       [blt y GRID_HEIGHT draw_grid]
0x84020000 # li r1 0             [clr x]
0x84040000 # li r2 0             [clr y]
0xD022262E # col 0x22262E        [col COLOR_GRID_LINE]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_grid_line_row>
0x40021001 # addi r1 r1 1        [inc x]
0x843E0079 # li tmp 121          [blt x GRID_WIDTH draw_grid_line_row]
0x9600135F # blt r1 tmp 26       [blt x GRID_WIDTH draw_grid_line_row]
0x40042008 # addi r2 r2 8        [add y y TILE_SIZE]
0x84020000 # li r1 0             [clr x]
0x843E0041 # li tmp 65           [blt y GRID_HEIGHT draw_grid_line_row]
0x9600235F # blt r2 tmp 26       [blt y GRID_HEIGHT draw_grid_line_row]
0x84020000 # li r1 0             [clr x]
0x84040000 # li r2 0             [clr y]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_grid_line_col>
0x40042001 # addi r2 r2 1        [inc y]
0x843E0041 # li tmp 65           [blt y GRID_HEIGHT draw_grid_line_col]
0x9600249F # blt r2 tmp 36       [blt y GRID_HEIGHT draw_grid_line_col]
0x40021008 # addi r1 r1 8        [add x x TILE_SIZE]
0x84040000 # li r2 0             [clr y]
0x843E0079 # li tmp 121          [blt x GRID_WIDTH draw_grid_line_col]
0x9600149F # blt r1 tmp 36       [blt x GRID_WIDTH draw_grid_line_col]
0x840E0000 # li r7 0             [clr cursor_x]
0x84100000 # li r8 0             [clr cursor_y]
0xD0D6BB15 # col 0xD6BB15        [col COLOR_CURSOR]
0xAA000089 # call 137            [call update_cursor]
0xA8000000 # ret
0x84240010 # li r18 16           [li mine_num MINE_NUM_MAX]               <label: init_mines>
0x84060000 # li r3 0             [clr i]
0x400BC000 # addi r5 rng 0       [mv t1 rng]                              <label: init_mines_loop>
0x400DC000 # addi r6 rng 0       [mv t2 rng]
0x4802500F # modi r1 r5 15       [mod x t1 GRID_COLS]
0x48046008 # modi r2 r6 8        [mod y t2 GRID_ROWS]
0x4612200F # mulli r9 r2 15      [mull addr y GRID_COLS]
0x00129001 # add r9 r9 r1        [add addr addr x]
0x800A9000 # lw r5 r9 0          [lw t1 addr 0]
0x843E0008 # li tmp 8            [beq t1 MINE_MASK init_mines_loop]
0x9200567F # beq r5 tmp 51       [beq t1 MINE_MASK init_mines_loop]
0x840A0008 # li r5 8             [li t1 MINE_MASK]
0x82009005 # sw r9 r5 0          [sw addr t1 0]
0x40063001 # addi r3 r3 1        [inc i]
0x96003672 # blt r3 r18 51       [blt i mine_num init_mines_loop]
0xA8000000 # ret
0x84020000 # li r1 0             [clr x]                                  <label: init_mine_counts>
0x84040000 # li r2 0             [clr y]
0x84120000 # li r9 0             [clr addr]
0xAA000051 # call 81             [call count_around_mines]                <label: init_mine_counts_loop>
0x800A9000 # lw r5 r9 0          [lw t1 addr 0]
0x000C500E # add r6 r5 r14       [add t2 t1 cnt]
0x82009006 # sw r9 r6 0          [sw addr t2 0]
0x40021001 # addi r1 r1 1        [inc x]
0x40129001 # addi r9 r9 1        [inc addr]
0x843E000F # li tmp 15           [blt x GRID_COLS init_mine_counts_loop]
0x9600189F # blt r1 tmp 68       [blt x GRID_COLS init_mine_counts_loop]
0x84020000 # li r1 0             [clr x]
0x40042001 # addi r2 r2 1        [inc y]
0x843E0008 # li tmp 8            [blt y GRID_ROWS init_mine_counts_loop]
0x9600289F # blt r2 tmp 68       [blt y GRID_ROWS init_mine_counts_loop]
0xA8000000 # ret
0x841C0000 # li r14 0            [clr cnt]                                <label: count_around_mines>
0x87D7FFFF # lui r11 0xFFFFF     [li ty 0xFFFFFFFF]
0x5416BFFF # ori r11 r11 0xFFF   [li ty 0xFFFFFFFF]
0x87D5FFFF # lui r10 0xFFFFF     [li tx 0xFFFFFFFF]                       <label: dy_loop>
0x5414AFFF # ori r10 r10 0xFFF   [li tx 0xFFFFFFFF]
0x0018100A # add r12 r1 r10      [add nx x tx]                            <label: dx_loop>
0x001A200B # add r13 r2 r11      [add ny y ty]
0x9600CC80 # blt r12 zero 100    [blt nx 0 skip_this_neighbor]
0x843E000F # li tmp 15           [bge nx GRID_COLS skip_this_neighbor]
0x9C00CC9F # bge r12 tmp 100     [bge nx GRID_COLS skip_this_neighbor]
0x9600DC80 # blt r13 zero 100    [blt ny 0 skip_this_neighbor]
0x843E0008 # li tmp 8            [bge ny GRID_ROWS skip_this_neighbor]
0x9C00DC9F # bge r13 tmp 100     [bge ny GRID_ROWS skip_this_neighbor]
0x460AD00F # mulli r5 r13 15     [mull t1 ny GRID_COLS]
0x000A500C # add r5 r5 r12       [add t1 t1 nx]
0x800C5000 # lw r6 r5 0          [lw t2 t1 0]
0x500C6008 # andi r6 r6 8        [and t2 t2 MINE_MASK]
0x70006008 # cmpi r6 8           [cmp t2 MINE_MASK]
0x405CE001 # addi.eq r14 r14 1   [inc.eq cnt]
0x4014A001 # addi r10 r10 1      [inc tx]                                 <label: skip_this_neighbor>
0x843E0001 # li tmp 1            [ble tx 1 dx_loop]
0x9800AADF # ble r10 tmp 86      [ble tx 1 dx_loop]
0x4016B001 # addi r11 r11 1      [inc ty]
0x843E0001 # li tmp 1            [ble ty 1 dy_loop]
0x9800BA9F # ble r11 tmp 84      [ble ty 1 dy_loop]
0xA8000000 # ret
0x7000F046 # cmpi r15 70         [cmp key_code KEY_UP]                    <label: move_cursor>
0x90400E80 # jmp.eq 116          [jmp.eq handle_cursor_move]
0x7000F048 # cmpi r15 72         [cmp key_code KEY_DOWN]
0x90400E80 # jmp.eq 116          [jmp.eq handle_cursor_move]
0x7000F045 # cmpi r15 69         [cmp key_code KEY_LEFT]
0x90400E80 # jmp.eq 116          [jmp.eq handle_cursor_move]
0x7000F047 # cmpi r15 71         [cmp key_code KEY_RIGHT]
0x90400E80 # jmp.eq 116          [jmp.eq handle_cursor_move]
0xA8000000 # ret
0xD022262E # col 0x22262E        [col COLOR_GRID_LINE]                    <label: handle_cursor_move>
0xAA000089 # call 137            [call update_cursor]
0x7000F046 # cmpi r15 70         [cmp key_code KEY_UP]
0x42508001 # subi.eq r8 r8 1     [dec.eq cursor_y]
0x7000F048 # cmpi r15 72         [cmp key_code KEY_DOWN]
0x40508001 # addi.eq r8 r8 1     [inc.eq cursor_y]
0x7000F045 # cmpi r15 69         [cmp key_code KEY_LEFT]
0x424E7001 # subi.eq r7 r7 1     [dec.eq cursor_x]
0x7000F047 # cmpi r15 71         [cmp key_code KEY_RIGHT]
0x404E7001 # addi.eq r7 r7 1     [inc.eq cursor_x]
0x70007000 # cmpi r7 0           [cmp cursor_x 0]
0x84CE000E # li.lt r7 14         [li.lt cursor_x 14]
0x7000700F # cmpi r7 15          [cmp cursor_x GRID_COLS]
0x850E0000 # li.ge r7 0          [li.ge cursor_x 0]
0x70008000 # cmpi r8 0           [cmp cursor_y 0]
0x84D00007 # li.lt r8 7          [li.lt cursor_y 7]
0x70008008 # cmpi r8 8           [cmp cursor_y GRID_ROWS]
0x85100000 # li.ge r8 0          [li.ge cursor_y 0]
0xD0D6BB15 # col 0xD6BB15        [col COLOR_CURSOR]
0xAA000089 # call 137            [call update_cursor]
0xA8000000 # ret
0x84060000 # li r3 0             [clr i]                                  <label: update_cursor>
0x84080000 # li r4 0             [clr j]
0x46027008 # mulli r1 r7 8       [mull x cursor_x TILE_SIZE]
0x46048008 # mulli r2 r8 8       [mull y cursor_y TILE_SIZE]
0xD2001002 # spx r1 r2           [spx x y]                                <label: update_cursor_loop1>
0x40021001 # addi r1 r1 1        [inc x]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0008 # li tmp 8            [ble i TILE_SIZE update_cursor_loop1]
0x980231BF # ble r3 tmp 141      [ble i TILE_SIZE update_cursor_loop1]
0x46027008 # mulli r1 r7 8       [mull x cursor_x TILE_SIZE]
0x84060000 # li r3 0             [clr i]
0x40042008 # addi r2 r2 8        [add y y TILE_SIZE]
0x40084001 # addi r4 r4 1        [inc j]
0x843E0001 # li tmp 1            [beq j 1 update_cursor_loop1]
0x920241BF # beq r4 tmp 141      [beq j 1 update_cursor_loop1]
0x46027008 # mulli r1 r7 8       [mull x cursor_x TILE_SIZE]
0x46048008 # mulli r2 r8 8       [mull y cursor_y TILE_SIZE]
0xD2001002 # spx r1 r2           [spx x y]                                <label: update_cursor_loop2>
0x40042001 # addi r2 r2 1        [inc y]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0008 # li tmp 8            [ble i TILE_SIZE update_cursor_loop2]
0x9802335F # ble r3 tmp 154      [ble i TILE_SIZE update_cursor_loop2]
0x46048008 # mulli r2 r8 8       [mull y cursor_y TILE_SIZE]
0x84060000 # li r3 0             [clr i]
0x40021008 # addi r1 r1 8        [add x x TILE_SIZE]
0x40084001 # addi r4 r4 1        [inc j]
0x843E0003 # li tmp 3            [beq j 3 update_cursor_loop2]
0x9202435F # beq r4 tmp 154      [beq j 3 update_cursor_loop2]
0xA8000000 # ret
0x4612800F # mulli r9 r8 15      [mull addr cursor_y GRID_COLS]           <label: reveal_tile>
0x00129007 # add r9 r9 r7        [add addr addr cursor_x]
0x800A9000 # lw r5 r9 0          [lw t1 addr 0]
0x500C5010 # andi r6 r5 16       [and t2 t1 REVEAL_MASK]
0x94026800 # bne r6 zero 192     [bne t2 0 reveal_tile_ret]
0x500C5020 # andi r6 r5 32       [and t2 t1 FLAG_MASK]
0x94026800 # bne r6 zero 192     [bne t2 0 reveal_tile_ret]
0x500C5008 # andi r6 r5 8        [and t2 t1 MINE_MASK]
0x94066B80 # bne r6 zero 0x1DC   [bne t2 0 lose_loop]
0x500C5007 # andi r6 r5 7        [and t2 t1 AROUND_COUNT_MASK]
0x40207000 # addi r16 r7 0       [mv arg_x cursor_x]
0x40228000 # addi r17 r8 0       [mv arg_y cursor_y]
0x70006000 # cmpi r6 0           [cmp t2 0]
0xAA4000C1 # call.eq 193         [call.eq reveal_around]
0x540A5010 # ori r5 r5 16        [or t1 t1 REVEAL_MASK]
0x82009005 # sw r9 r5 0          [sw addr t1 0]
0x70006001 # cmpi r6 1           [cmp t2 1]
0xAA400158 # call.eq 0x158       [call.eq draw_num1]
0x70006002 # cmpi r6 2           [cmp t2 2]
0xAA400167 # call.eq 0x167       [call.eq draw_num2]
0x70006003 # cmpi r6 3           [cmp t2 3]
0xAA400181 # call.eq 0x181       [call.eq draw_num3]
0x70006004 # cmpi r6 4           [cmp t2 4]
0xAA40019B # call.eq 0x19B       [call.eq draw_num4]
0x70006005 # cmpi r6 5           [cmp t2 5]
0xAA4001B3 # call.eq 0x1B3       [call.eq draw_num5]
0xA8000000 # ret                                                          <label: reveal_tile_ret>
0x40187000 # addi r12 r7 0       [mv nx cursor_x]                         <label: reveal_around>
0x401A8000 # addi r13 r8 0       [mv ny cursor_y]
0x9602CDE0 # blt r12 zero 239    [blt nx 0 reveal_around_ret]             <label: reveal_around_loop>
0x843E000F # li tmp 15           [bge nx GRID_COLS reveal_around_ret]
0x9C02CDFF # bge r12 tmp 239     [bge nx GRID_COLS reveal_around_ret]
0x9602DDE0 # blt r13 zero 239    [blt ny 0 reveal_around_ret]
0x843E0008 # li tmp 8            [bge ny GRID_ROWS reveal_around_ret]
0x9C02DDFF # bge r13 tmp 239     [bge ny GRID_ROWS reveal_around_ret]
0x4612D00F # mulli r9 r13 15     [mull addr ny GRID_COLS]
0x0012900C # add r9 r9 r12       [add addr addr nx]
0x800A9000 # lw r5 r9 0          [lw t1 addr 0]
0x500C5010 # andi r6 r5 16       [and t2 t1 REVEAL_MASK]
0x94026DE0 # bne r6 zero 239     [bne t2 0 reveal_around_ret]
0x500C5020 # andi r6 r5 32       [and t2 t1 FLAG_MASK]
0x94026DE0 # bne r6 zero 239     [bne t2 0 reveal_around_ret]
0x540A5010 # ori r5 r5 16        [or t1 t1 REVEAL_MASK]
0x82009005 # sw r9 r5 0          [sw addr t1 0]
0x500C5007 # andi r6 r5 7        [and t2 t1 AROUND_COUNT_MASK]
0x4020C000 # addi r16 r12 0      [mv arg_x nx]
0x4022D000 # addi r17 r13 0      [mv arg_y ny]
0x70006000 # cmpi r6 0           [cmp t2 0]
0xD0384048 # col 0x384048        [col COLOR_REVEALED]
0xAA400106 # call.eq 0x106       [call.eq draw_tile]
0x70006001 # cmpi r6 1           [cmp t2 1]
0xAA400158 # call.eq 0x158       [call.eq draw_num1]
0x70006002 # cmpi r6 2           [cmp t2 2]
0xAA400167 # call.eq 0x167       [call.eq draw_num2]
0x70006003 # cmpi r6 3           [cmp t2 3]
0xAA400181 # call.eq 0x181       [call.eq draw_num3]
0x70006004 # cmpi r6 4           [cmp t2 4]
0xAA40019B # call.eq 0x19B       [call.eq draw_num4]
0x70006005 # cmpi r6 5           [cmp t2 5]
0xAA4001B3 # call.eq 0x1B3       [call.eq draw_num5]
0x94026DE0 # bne r6 zero 239     [bne t2 0 reveal_around_ret]
0x421AD001 # subi r13 r13 1      [dec ny]
0xAA0000C3 # call 195            [call reveal_around_loop]
0x401AD001 # addi r13 r13 1      [inc ny]
0x401AD001 # addi r13 r13 1      [inc ny]
0xAA0000C3 # call 195            [call reveal_around_loop]
0x421AD001 # subi r13 r13 1      [dec ny]
0x4218C001 # subi r12 r12 1      [dec nx]
0xAA0000C3 # call 195            [call reveal_around_loop]
0x4018C001 # addi r12 r12 1      [inc nx]
0x4018C001 # addi r12 r12 1      [inc nx]
0xAA0000C3 # call 195            [call reveal_around_loop]
0x4218C001 # subi r12 r12 1      [dec nx]
0xA8000000 # ret                                                          <label: reveal_around_ret>
0x4612800F # mulli r9 r8 15      [mull addr cursor_y GRID_COLS]           <label: toggle_flag>
0x00129007 # add r9 r9 r7        [add addr addr cursor_x]
0x800A9000 # lw r5 r9 0          [lw t1 addr 0]
0x500C5010 # andi r6 r5 16       [and t2 t1 REVEAL_MASK]
0x70006000 # cmpi r6 0           [cmp t2 0]
0xA8800000 # ret.ne
0x500C5020 # andi r6 r5 32       [and t2 t1 FLAG_MASK]
0x70006000 # cmpi r6 0           [cmp t2 0]
0x42652001 # subi.eq r18 r18 1   [dec.eq mine_num]
0x544A5020 # ori.eq r5 r5 32     [or.eq t1 t1 FLAG_MASK]
0xAA400119 # call.eq 0x119       [call.eq draw_flag]
0x40A52001 # addi.ne r18 r18 1   [inc.ne mine_num]
0x863EFFFF # lui tmp 0xFFFF      [li.ne t2 0xFFFFFDF]
0x543FFFDF # ori tmp tmp 0xFDF   [li.ne t2 0xFFFFFDF]
0x408DF000 # addi.ne r6 tmp 0    [li.ne t2 0xFFFFFDF]
0x108A5006 # and.ne r5 r5 r6     [and.ne t1 t1 t2]
0x40207000 # addi r16 r7 0       [mv arg_x cursor_x]
0x40228000 # addi r17 r8 0       [mv arg_y cursor_y]
0xD04C545C # col 0x4C545C        [col COLOR_HIDDEN]
0xAA800106 # call.ne 0x106       [call.ne draw_tile]
0x82009005 # sw r9 r5 0          [sw addr t1 0]
0xA8000000 # ret
0x84060000 # li r3 0             [clr i]                                  <label: draw_tile>
0x84080000 # li r4 0             [clr j]
0x46030008 # mulli r1 r16 8      [mull x arg_x TILE_SIZE]
0x46051008 # mulli r2 r17 8      [mull y arg_y TILE_SIZE]
0x40021001 # addi r1 r1 1        [inc x]
0x40042001 # addi r2 r2 1        [inc y]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_tile_loop>
0x40021001 # addi r1 r1 1        [inc x]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0007 # li tmp 7            [blt i 7 draw_tile_loop]
0x9604319F # blt r3 tmp 0x10C    [blt i 7 draw_tile_loop]
0x46030008 # mulli r1 r16 8      [mull x arg_x TILE_SIZE]
0x40021001 # addi r1 r1 1        [inc x]
0x40042001 # addi r2 r2 1        [inc y]
0x84060000 # li r3 0             [clr i]
0x40084001 # addi r4 r4 1        [inc j]
0x843E0007 # li tmp 7            [blt j 7 draw_tile_loop]
0x9604419F # blt r4 tmp 0x10C    [blt j 7 draw_tile_loop]
0xA8000000 # ret
0x46027008 # mulli r1 r7 8       [mull x cursor_x TILE_SIZE]              <label: draw_flag>
0x46048008 # mulli r2 r8 8       [mull y cursor_y TILE_SIZE]
0xD0F75050 # col 0xF75050        [col COLOR_FLAG]
0x40021004 # addi r1 r1 4        [add x x 4]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD2001002 # spx r1 r2           [spx x y]
0x40042001 # addi r2 r2 1        [inc y]
0xD2001002 # spx r1 r2           [spx x y]
0x40042001 # addi r2 r2 1        [inc y]
0xD2001002 # spx r1 r2           [spx x y]
0x42021001 # subi r1 r1 1        [dec x]
0xD2001002 # spx r1 r2           [spx x y]
0x42021001 # subi r1 r1 1        [dec x]
0xD2001002 # spx r1 r2           [spx x y]
0x40021001 # addi r1 r1 1        [inc x]
0x42042001 # subi r2 r2 1        [dec y]
0xD2001002 # spx r1 r2           [spx x y]
0x40021001 # addi r1 r1 1        [inc x]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD2001002 # spx r1 r2           [spx x y]
0x42021002 # subi r1 r1 2        [sub x x 2]
0x40042001 # addi r2 r2 1        [inc y]
0xD0D8E0E8 # col 0xD8E0E8        [col COLOR_POLE]
0x84060000 # li r3 0             [clr i]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_pole>
0x40021001 # addi r1 r1 1        [inc x]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0005 # li tmp 5            [blt i 5 draw_pole]
0x9604363F # blt r3 tmp 0x131    [blt i 5 draw_pole]
0xA8000000 # ret
0x46030008 # mulli r1 r16 8      [mull x arg_x TILE_SIZE]                 <label: draw_mine>
0x46051008 # mulli r2 r17 8      [mull y arg_y TILE_SIZE]
0x40021004 # addi r1 r1 4        [add x x 4]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD0000000 # col 0x000000        [col COLOR_MINE]
0xD2001002 # spx r1 r2           [spx x y]
0x40042001 # addi r2 r2 1        [inc y]
0xD2001002 # spx r1 r2           [spx x y]
0x42021001 # subi r1 r1 1        [dec x]
0xD2001002 # spx r1 r2           [spx x y]
0x40021002 # addi r1 r1 2        [add x x 2]
0xD2001002 # spx r1 r2           [spx x y]
0x40042001 # addi r2 r2 1        [inc y]
0xD2001002 # spx r1 r2           [spx x y]
0x40021001 # addi r1 r1 1        [inc x]
0xD2001002 # spx r1 r2           [spx x y]
0x42021002 # subi r1 r1 2        [sub x x 2]
0xD2001002 # spx r1 r2           [spx x y]
0x42021001 # subi r1 r1 1        [dec x]
0xD2001002 # spx r1 r2           [spx x y]
0x42021001 # subi r1 r1 1        [dec x]
0xD2001002 # spx r1 r2           [spx x y]
0x40021001 # addi r1 r1 1        [inc x]
0x40042001 # addi r2 r2 1        [inc y]
0xD2001002 # spx r1 r2           [spx x y]
0x40021001 # addi r1 r1 1        [inc x]
0xD2001002 # spx r1 r2           [spx x y]
0x40021001 # addi r1 r1 1        [inc x]
0xD2001002 # spx r1 r2           [spx x y]
0x42021001 # subi r1 r1 1        [dec x]
0x40042001 # addi r2 r2 1        [inc y]
0xD2001002 # spx r1 r2           [spx x y]
0xA8000000 # ret
0xD0384048 # col 0x384048        [col COLOR_REVEALED]                     <label: draw_num1>
0xAA000106 # call 0x106          [call draw_tile]
0x84060000 # li r3 0             [clr i]
0x84080000 # li r4 0             [clr j]
0x46030008 # mulli r1 r16 8      [mull x arg_x TILE_SIZE]
0x46051008 # mulli r2 r17 8      [mull y arg_y TILE_SIZE]
0x40021004 # addi r1 r1 4        [add x x 4]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD07CC7FF # col 0x7CC7ff        [col COLOR_NUM1]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_num1_loop>
0x40042001 # addi r2 r2 1        [inc y]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0005 # li tmp 5            [blt i 5 draw_num1_loop]
0x96043C3F # blt r3 tmp 0x161    [blt i 5 draw_num1_loop]
0xA8000000 # ret
0xD0384048 # col 0x384048        [col COLOR_REVEALED]                     <label: draw_num2>
0xAA000106 # call 0x106          [call draw_tile]
0x84060000 # li r3 0             [clr i]
0x84080000 # li r4 0             [clr j]
0x46030008 # mulli r1 r16 8      [mull x arg_x TILE_SIZE]
0x46051008 # mulli r2 r17 8      [mull y arg_y TILE_SIZE]
0x40021003 # addi r1 r1 3        [add x x 3]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD066C266 # col 0x66C266        [col COLOR_NUM2]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_num2_loop>
0x40021001 # addi r1 r1 1        [inc x]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0003 # li tmp 3            [blt i 3 draw_num2_loop]
0x96043E1F # blt r3 tmp 0x170    [blt i 3 draw_num2_loop]
0x42021003 # subi r1 r1 3        [sub x x 3]
0x40042002 # addi r2 r2 2        [add y y 2]
0x84060000 # li r3 0             [clr i]
0x40084001 # addi r4 r4 1        [inc j]
0x843E0003 # li tmp 3            [blt j 3 draw_num2_loop]
0x96044E1F # blt r4 tmp 0x170    [blt j 3 draw_num2_loop]
0x42042003 # subi r2 r2 3        [sub y y 3]
0xD2001002 # spx r1 r2           [spx x y]
0x40021002 # addi r1 r1 2        [add x x 2]
0x42042002 # subi r2 r2 2        [sub y y 2]
0xD2001002 # spx r1 r2           [spx x y]
0xA8000000 # ret
0xD0384048 # col 0x384048        [col COLOR_REVEALED]                     <label: draw_num3>
0xAA000106 # call 0x106          [call draw_tile]
0x84060000 # li r3 0             [clr i]
0x84080000 # li r4 0             [clr j]
0x46030008 # mulli r1 r16 8      [mull x arg_x TILE_SIZE]
0x46051008 # mulli r2 r17 8      [mull y arg_y TILE_SIZE]
0x40021003 # addi r1 r1 3        [add x x 3]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD0FF7788 # col 0xFF7788        [col COLOR_NUM3]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_num3_loop>
0x40021001 # addi r1 r1 1        [inc x]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0003 # li tmp 3            [blt i 3 draw_num3_loop]
0x9606315F # blt r3 tmp 0x18A    [blt i 3 draw_num3_loop]
0x42021003 # subi r1 r1 3        [sub x x 3]
0x40042002 # addi r2 r2 2        [add y y 2]
0x84060000 # li r3 0             [clr i]
0x40084001 # addi r4 r4 1        [inc j]
0x843E0003 # li tmp 3            [blt j 3 draw_num3_loop]
0x9606415F # blt r4 tmp 0x18A    [blt j 3 draw_num3_loop]
0x40021002 # addi r1 r1 2        [add x x 2]
0x42042003 # subi r2 r2 3        [sub y y 3]
0xD2001002 # spx r1 r2           [spx x y]
0x42042002 # subi r2 r2 2        [sub y y 2]
0xD2001002 # spx r1 r2           [spx x y]
0xA8000000 # ret
0xD0384048 # col 0x384048        [col COLOR_REVEALED]                     <label: draw_num4>
0xAA000106 # call 0x106          [call draw_tile]
0x84060000 # li r3 0             [clr i]
0x46030008 # mulli r1 r16 8      [mull x arg_x TILE_SIZE]
0x46051008 # mulli r2 r17 8      [mull y arg_y TILE_SIZE]
0x40021003 # addi r1 r1 3        [add x x 3]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD0EE88FF # col 0xEE88FF        [col COLOR_NUM4]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_num4_loop1>
0x40042001 # addi r2 r2 1        [inc y]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0003 # li tmp 3            [blt i 3 draw_num4_loop1]
0x9606347F # blt r3 tmp 0x1A3    [blt i 3 draw_num4_loop1]
0x40021001 # addi r1 r1 1        [inc x]
0x42042001 # subi r2 r2 1        [dec y]
0xD2001002 # spx r1 r2           [spx x y]
0x40021001 # addi r1 r1 1        [inc x]
0x42042002 # subi r2 r2 2        [sub y y 2]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_num4_loop2>
0x40042001 # addi r2 r2 1        [inc y]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0008 # li tmp 8            [blt i 8 draw_num4_loop2]
0x960635BF # blt r3 tmp 0x1AD    [blt i 8 draw_num4_loop2]
0xA8000000 # ret
0xD0384048 # col 0x384048        [col COLOR_REVEALED]                     <label: draw_num5>
0xAA000106 # call 0x106          [call draw_tile]
0x84060000 # li r3 0             [clr i]
0x84080000 # li r4 0             [clr j]
0x46030008 # mulli r1 r16 8      [mull x arg_x TILE_SIZE]
0x46051008 # mulli r2 r17 8      [mull y arg_y TILE_SIZE]
0x40021003 # addi r1 r1 3        [add x x 3]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD0DDAA22 # col 0xDDAA22        [col COLOR_NUM5]
0xD2001002 # spx r1 r2           [spx x y]                                <label: draw_num5_loop>
0x40021001 # addi r1 r1 1        [inc x]
0x40063001 # addi r3 r3 1        [inc i]
0x843E0003 # li tmp 3            [blt i 3 draw_num5_loop]
0x9606379F # blt r3 tmp 0x1BC    [blt i 3 draw_num5_loop]
0x42021003 # subi r1 r1 3        [sub x x 3]
0x40042002 # addi r2 r2 2        [add y y 2]
0x84060000 # li r3 0             [clr i]
0x40084001 # addi r4 r4 1        [inc j]
0x843E0003 # li tmp 3            [blt j 3 draw_num5_loop]
0x9606479F # blt r4 tmp 0x1BC    [blt j 3 draw_num5_loop]
0x42042005 # subi r2 r2 5        [sub y y 5]
0xD2001002 # spx r1 r2           [spx x y]
0x40021002 # addi r1 r1 2        [add x x 2]
0x40042002 # addi r2 r2 2        [add y y 2]
0xD2001002 # spx r1 r2           [spx x y]
0xA8000000 # ret
0x401FB000 # addi r15 kb 0       [mv key_code kb]                         <label: read_key>
0x9206F9A0 # beq r15 zero 0x1CD  [beq key_code 0 read_key]
0xA8000000 # ret
0xAA000001 # call 1              [call init_screen]                       <label: main>
0xAA000031 # call 49             [call init_mines]
0xAA000041 # call 65             [call init_mine_counts]
0xAA0001CD # call 0x1CD          [call read_key]                          <label: main_loop>
0xAA00006B # call 107            [call move_cursor]
0x7000F037 # cmpi r15 55         [cmp key_code KEY_REVEAL]
0xAA4000A6 # call.eq 166         [call.eq reveal_tile]
0x7000F038 # cmpi r15 56         [cmp key_code KEY_FLAG]
0xAA4000F0 # call.eq 240         [call.eq toggle_flag]
0xD4000012 # seg r18             [seg mine_num]
0x90060A60 # jmp 0x1D3           [jmp main_loop]
0x90060B60 # jmp 0x1DB           [jmp win_loop]                           <label: win_loop>
0x40207000 # addi r16 r7 0       [mv arg_x cursor_x]                      <label: lose_loop>
0x40228000 # addi r17 r8 0       [mv arg_y cursor_y]
0xD0EE6666 # col 0xEE6666        [col COLOR_MINE_BACK]
0xAA000106 # call 0x106          [call draw_tile]
0xAA000137 # call 0x137          [call draw_mine]
0x841A0000 # li r13 0            [clr ny]
0x84120000 # li r9 0             [clr addr]
0x84180000 # li r12 0            [clr nx]                                 <label: lose_row_loop>
0x9406CCE7 # bne r12 r7 0x1E7    [bne nx cursor_x lose_loop_cont]         <label: lose_col_loop>
0x9406DCE8 # bne r13 r8 0x1E7    [bne ny cursor_y lose_loop_cont]
0x90060E00 # jmp 0x1F0           [jmp skip_draw]
0x800A9000 # lw r5 r9 0          [lw t1 addr 0]                           <label: lose_loop_cont>
0x500C5008 # andi r6 r5 8        [and t2 t1 MINE_MASK]
0x70006000 # cmpi r6 0           [cmp t2 0]
0x40A0C000 # addi.ne r16 r12 0   [mv.ne arg_x nx]
0x40A2D000 # addi.ne r17 r13 0   [mv.ne arg_y ny]
0xD0384048 # col 0x384048        [col COLOR_REVEALED]
0xAA800106 # call.ne 0x106       [call.ne draw_tile]
0x70006000 # cmpi r6 0           [cmp t2 0]
0xAA800137 # call.ne 0x137       [call.ne draw_mine]
0x4018C001 # addi r12 r12 1      [inc nx]                                 <label: skip_draw>
0x40129001 # addi r9 r9 1        [inc addr]
0x843E000F # li tmp 15           [blt nx GRID_COLS lose_col_loop]
0x9606CC9F # blt r12 tmp 0x1E4   [blt nx GRID_COLS lose_col_loop]
0x401AD001 # addi r13 r13 1      [inc ny]
0x843E0008 # li tmp 8            [blt ny GRID_ROWS lose_row_loop]
0x9606DC7F # blt r13 tmp 0x1E3   [blt ny GRID_ROWS lose_row_loop]
0x90060EE0 # jmp 0x1F7           [jmp halt]                               <label: halt>
----- stderr -----
